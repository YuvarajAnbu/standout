"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[399],{399:function(e,n,i){i.r(n),i.d(n,{default:function(){return f}});var s=i(1413),t=i(9439),c=i(2791),l=i(9331),r=i(1087),a=i(1363),_=i(1134),o=i(184);var d=function(e){var n=e.hidden,i=e.setHidden,l=e.billingDetails,r=e.setBillingDetails,d=(0,_.cI)(),u=d.register,h=d.handleSubmit,m=d.formState.errors,p=(0,c.useState)(!1),g=(0,t.Z)(p,2),b=g[0],f=g[1];return(0,o.jsxs)("div",{className:"billing__checkout__content__container",children:[(0,o.jsxs)("form",{onSubmit:h((function(e){r((function(n){return(0,s.Z)((0,s.Z)({},n),{},{user:e})})),i(b?function(e){return(0,s.Z)((0,s.Z)({},e),{},{user:!0})}:function(e){return(0,s.Z)((0,s.Z)({},e),{},{user:!0,address:!1})})})),className:n.user?"billing__checkout__content__container__form billing__checkout__content__container__form--hidden":"billing__checkout__content__container__form",children:[(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__flex",children:[(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"firstName",children:["first name ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)((0,s.Z)({name:"firstName"},u("firstName",{pattern:{value:/^\w{2,}$/,message:"Should be 2 or more than 2 letters"},required:"Required"})),{},{defaultValue:l.user.firstName})),"undefined"!==typeof m.firstName&&(0,o.jsxs)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",m.firstName.message]})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"lastName",children:["last name ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)((0,s.Z)({name:"lastName"},u("lastName",{pattern:{value:/^\w{2,}$/,message:"Should be 2 or more than 2 letters"},required:"Required"})),{},{defaultValue:l.user.lastName})),"undefined"!==typeof m.lastName&&(0,o.jsxs)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",m.lastName.message]})]})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"email",children:["email address ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)((0,s.Z)({name:"email",type:"text"},u("email",{pattern:{value:/^\w{2,}@\w{2,}\.\w{2,}(\.\w{2,})?$/,message:"Invalid Email Address"},required:"Required"})),{},{defaultValue:l.user.email})),"undefined"!==typeof m.email&&(0,o.jsxs)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",m.email.message]})]}),(0,o.jsx)("button",{type:"submit",children:"continue"})]}),"undefined"!==typeof l.user&&(0,o.jsxs)("div",{className:n.user?"billing__checkout__content__container__desc":"billing__checkout__content__container__desc billing__checkout__content__container__desc--hidden",children:[(0,o.jsx)("p",{children:"".concat(l.user.firstName," ").concat(l.user.lastName)}),(0,o.jsx)("p",{children:l.user.email}),(0,o.jsx)("p",{className:"billing__checkout__content__container__desc__edit",onClick:function(){f(!0),i((function(e){return(0,s.Z)((0,s.Z)({},e),{},{user:!1})}))},children:"edit"})]})]})};var u=function(e){var n=e.usStates,i=e.setHidden,t=e.addresses,c=e.billingDetails,l=e.setBillingDetails,r=e.errors,_=e.register,d=e.hideBillingAddress,u=e.showShippingForm,h=e.setShowShippingForm;return(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"billing__checkout__content__container__form__label",children:["shipping address",t.length>=1&&u&&(0,o.jsx)("span",{onClick:function(){h(!1),l((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:{shipping:{},billing:e.address.billing}})}))},children:"choose address"})]}),"undefined"!==typeof r.addressShipping&&(0,o.jsxs)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.addressShipping.message]}),u?(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__flex",children:[(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"shipping.firstName",children:["first name ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)((0,s.Z)({name:"shipping.firstName"},_("shipping.firstName",{pattern:{value:/^[\w ]{0,}[\w]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 letters"},required:"Required"})),{},{defaultValue:c.address.shipping.firstName})),"undefined"!==typeof r.shipping&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.shipping.firstName&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.shipping.firstName.message]})})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"shipping.lastName",children:["last name ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)((0,s.Z)({name:"shipping.lastName"},_("shipping.lastName",{pattern:{value:/^[\w ]{0,}[\w]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 letters"},required:"Required"})),{},{defaultValue:c.address.shipping.lastName})),"undefined"!==typeof r.shipping&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.shipping.lastName&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.shipping.lastName.message]})})]})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"shipping.streetAddress",children:["street address ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)((0,s.Z)({name:"shipping.streetAddress"},_("shipping.streetAddress",{pattern:{value:/^[\w ]{0,}[\w/d]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 numbers or letters"},required:"Required"})),{},{defaultValue:c.address.shipping.streetAddress})),"undefined"!==typeof r.shipping&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.shipping.streetAddress&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.shipping.streetAddress.message]})})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsx)("label",{htmlFor:"shipping.extendedAddress",children:"Apt #, Floor, etc. (optional)"}),(0,o.jsx)("input",(0,s.Z)((0,s.Z)({name:"shipping.extendedAddress"},_("shipping.extendedAddress",{pattern:{value:/^[\w ]{0,}[\w/d]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 numbers or letters"}})),{},{defaultValue:c.address.shipping.extendedAddress})),"undefined"!==typeof r.shipping&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.shipping.extendedAddress&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.shipping.extendedAddress.message]})})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__flex",children:[(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"shipping.postalCode",children:["postal code ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)((0,s.Z)({name:"shipping.postalCode"},_("shipping.postalCode",{pattern:{value:/^\d{5}([-]?\d{4})?$/,message:"Invalid Postal Code"},required:"Required"})),{},{defaultValue:c.address.shipping.postalCode})),"undefined"!==typeof r.shipping&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.shipping.postalCode&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.shipping.postalCode.message]})})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"shipping.locality",children:["city ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)((0,s.Z)({name:"shipping.locality"},_("shipping.locality",{pattern:{value:/^[\w ]{0,}[\w]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 numbers or letters"},required:"Required"})),{},{defaultValue:c.address.shipping.locality})),"undefined"!==typeof r.shipping&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.shipping.locality&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.shipping.locality.message]})})]})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"shipping.region",children:["State / Province ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container__select-container",children:[(0,o.jsx)("select",(0,s.Z)((0,s.Z)({name:"shipping.region"},_("shipping.region")),{},{defaultValue:c.address.shipping.region,children:n.map((function(e,n){return(0,o.jsx)("option",{value:e.abbreviation,children:e.name},n)}))})),(0,o.jsx)(a.G,{icon:"chevron-right",className:"icon"})]})]})]}):(0,o.jsxs)("div",{className:"billing__checkout__content__container__address-container",children:[t.map((function(e,n){return(0,o.jsxs)("div",{className:"billing__checkout__content__container__address-container__address",children:[(0,o.jsx)("input",(0,s.Z)((0,s.Z)({id:"radio-button",type:"radio",name:"addressShipping",value:n},_("addressShipping",{required:"Address cannot be empty"})),{},{onClick:function(n){delete e._id,d?(l((function(n){return(0,s.Z)((0,s.Z)({},n),{},{address:{shipping:e,billing:e}})})),i((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:!0,card:!1})}))):(l((function(n){return(0,s.Z)((0,s.Z)({},n),{},{address:{shipping:e,billing:n.address.billing}})})),"undefined"!==typeof c.address.billing&&i((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:!0,card:!1})})))}})),(0,o.jsx)("div",{className:"billing__checkout__content__container__address-container__address__icon"}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__address-container__address__desc",children:[(0,o.jsx)("p",{children:"".concat(e.firstName," ").concat(e.lastName)}),""!==e.extendedAddress&&(0,o.jsxs)("p",{children:[e.extendedAddress,","]}),(0,o.jsxs)("p",{children:[e.streetAddress,","]}),(0,o.jsx)("p",{children:"".concat(e.locality,", ").concat(e.region," ").concat(e.postalCode)})]})]},n)})),(0,o.jsx)("div",{className:"billing__checkout__content__container__address-container__address billing__checkout__content__container__address-container__none",onClick:function(){h(!0),l((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:{shipping:{},billing:e.address.billing}})}))},children:(0,o.jsx)("p",{children:"none of these"})})]})]})};var h=function(e){var n=e.usStates,i=e.addresses,t=e.billingDetails,c=e.setBillingDetails,l=e.setHidden,r=e.errors,_=e.register,d=e.showBillingForm,u=e.setShowBillingForm;return(0,o.jsxs)("div",{className:"billing__checkout__content__container__form--billing",children:[(0,o.jsxs)("p",{className:"billing__checkout__content__container__form__label",children:["Billing address",i.length>=1&&d&&(0,o.jsx)("span",{onClick:function(){u(!1),c((function(e){return delete e.address.billing,(0,s.Z)({},e)}))},children:"choose address"})]}),"undefined"!==typeof r.addressBilling&&(0,o.jsxs)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.addressBilling.message]}),d?(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__flex",children:[(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"billing.firstName",children:["first name ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)({name:"billing.firstName"},_("billing.firstName",{pattern:{value:/^[\w ]{0,}[\w]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 letters"},required:"Required"}))),"undefined"!==typeof r.billing&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.billing.firstName&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.billing.firstName.message]})})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"billing.lastName",children:["last name ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)({name:"billing.lastName"},_("billing.lastName",{pattern:{value:/^[\w ]{0,}[\w]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 letters"},required:"Required"}))),"undefined"!==typeof r.billing&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.billing.lastName&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.billing.lastName.message]})})]})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"billing.streetAddress",children:["street address ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)({name:"billing.streetAddress"},_("billing.streetAddress",{pattern:{value:/^[\w ]{0,}[\w/d]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 numbers or letters"},required:"Required"}))),"undefined"!==typeof r.billing&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.billing.streetAddress&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.billing.streetAddress.message]})})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsx)("label",{htmlFor:"billing.extendedAddress",children:"Apt #, Floor, etc. (optional)"}),(0,o.jsx)("input",(0,s.Z)({name:"billing.extendedAddress"},_("billing.extendedAddress",{pattern:{value:/^[\w ]{0,}[\w/d]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 numbers or letters"}}))),"undefined"!==typeof r.billing&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.billing.extendedAddress&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.billing.extendedAddress.message]})})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__flex",children:[(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"billing.postalCode",children:["postal code ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)({name:"billing.postalCode"},_("billing.postalCode",{pattern:{value:/^\d{5}([-]?\d{4})?$/,message:"Invalid Postal Code"},required:"Required"}))),"undefined"!==typeof r.billing&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.billing.postalCode&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.billing.postalCode.message]})})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"billing.locaity",children:["city ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("input",(0,s.Z)({name:"billing.locality"},_("billing.locality",{pattern:{value:/^[\w ]{0,}[\w/d]{2,}[\w ]{0,}$/,message:"Should only be 2 or more than 2 numbers or letters"},required:"Required"}))),"undefined"!==typeof r.billing&&(0,o.jsx)("p",{className:"billing__checkout__content__container__form__input-container__error-msg",children:"undefined"!==typeof r.billing.locality&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",r.billing.locality.message]})})]})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"billing.region",children:["State / Province ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container__select-container",children:[(0,o.jsx)("select",(0,s.Z)((0,s.Z)({name:"billing.region",placeholder:"State / Province"},_("billing.region")),{},{children:n.map((function(e,n){return(0,o.jsx)("option",{value:e.abbreviation,children:e.name},n)}))})),(0,o.jsx)(a.G,{icon:"chevron-right",className:"icon"})]})]})]}):(0,o.jsxs)("div",{className:"billing__checkout__content__container__address-container",children:[i.map((function(e,n){return(0,o.jsxs)("div",{className:"billing__checkout__content__container__address-container__address",children:[(0,o.jsx)("input",(0,s.Z)((0,s.Z)({id:"radio-button",type:"radio",name:"addressBilling",value:n},_("billing.region",{required:"address cannot be empty"})),{},{onClick:function(){delete e._id,c((function(n){return(0,s.Z)((0,s.Z)({},n),{},{address:{shipping:n.address.shipping,billing:e}})})),"undefined"!==typeof t.address.shipping.firstName&&l((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:!0,card:!1})}))}})),(0,o.jsx)("div",{className:"billing__checkout__content__container__address-container__address__icon"}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__address-container__address__desc",children:[(0,o.jsx)("p",{className:"billing__checkout__content__container__address-container__address__desc__name",children:"".concat(e.firstName," ").concat(e.lastName)}),""!==e.extendedAddress&&(0,o.jsxs)("p",{children:[e.extendedAddress,","]}),(0,o.jsxs)("p",{children:[e.streetAddress,","]}),(0,o.jsx)("p",{children:"".concat(e.locality,", ").concat(e.region," ").concat(e.postalCode)})]})]},n)})),(0,o.jsx)("div",{className:"billing__checkout__content__container__address-container__none",onClick:function(){u(!0),c((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:{shipping:e.address.shipping}})}))},children:(0,o.jsx)("p",{children:"none of these"})})]})]})};var m=function(e){var n=e.hidden,i=e.setHidden,r=e.billingDetails,d=e.setBillingDetails,m=e.user,p=(0,c.useContext)(l.sA),g=(0,c.useState)([]),b=(0,t.Z)(g,2),f=b[0],x=b[1],j=(0,c.useState)(!0),N=(0,t.Z)(j,2),v=N[0],k=N[1],y=(0,c.useState)(!0),Z=(0,t.Z)(y,2),S=Z[0],w=Z[1],A=(0,c.useState)(!0),C=(0,t.Z)(A,2),F=C[0],q=C[1],D=(0,c.useState)(!1),G=(0,t.Z)(D,2),B=G[0],E=G[1];(0,c.useEffect)((function(){"undefined"!==typeof m.name&&(x(m.addresses),i((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:!1})})),m.addresses.length>0&&(w(!1),q(!1)))}),[i,m.name,m.addresses]),(0,c.useEffect)((function(){S||v&&"undefined"!==typeof r.address.shipping.firstName&&(d((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:{shipping:e.address.shipping,billing:e.address.shipping}})})),i((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:!0,card:!1})})))}),[v,r.address.shipping.firstName,d,i,S]);var $=(0,_.cI)(),R=$.register,I=$.handleSubmit,H=$.formState.errors,V=$.setValue;return(0,o.jsxs)("div",{className:"billing__checkout__content__container",children:[(0,o.jsxs)("form",{onSubmit:I((function(e){"undefined"===typeof e.billing&&(e.billing=e.shipping),S||(delete e.addressShipping,e.shipping=r.address.shipping),F||(delete e.addressBilling,r.address.billing?e.billing=r.address.billing:e.billing=e.shipping);var n={};Object.keys(e).forEach((function(i){n[i]={},e[i]&&Object.keys(e[i]).forEach((function(s){"string"===typeof e[i][s]?(n[i][s]=e[i][s].trim(),V("".concat(i,".").concat(s),e[i][s].trim())):(n[i][s]=e[i][s],V("".concat(i,".").concat(s),e[i][s]))}))})),d((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:n})})),i(B?function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:!0})}:function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:!0,card:!1})})})),className:n.address?"billing__checkout__content__container__form--hidden":"billing__checkout__content__container__form",children:[(0,o.jsx)(u,{addresses:f,billingDetails:r,setBillingDetails:d,setHidden:i,errors:H,register:R,hideBillingAddress:v,setHideBillingAddress:k,showShippingForm:S,setShowShippingForm:w,usStates:p}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__checkbox",children:[(0,o.jsx)("div",{className:"billing__checkout__content__container__form__checkbox__icons",onClick:function(){k((function(e){return!e})),d((function(e){return delete e.address.billing,(0,s.Z)({},e)}))},children:v?(0,o.jsx)(a.G,{icon:"check-square"}):(0,o.jsx)(a.G,{icon:["far","square"]})}),(0,o.jsx)("p",{children:"Billing Address is same as the Shipping Address"})]}),!v&&(0,o.jsx)(h,{addresses:f,billingDetails:r,setBillingDetails:d,setHidden:i,errors:H,register:R,showBillingForm:F,setShowBillingForm:q,usStates:p}),(S||F)&&(0,o.jsx)("button",{type:"submit",children:"continue"})]}),"undefined"!==typeof r.address.shipping&&"undefined"!==typeof r.address.billing&&(0,o.jsxs)("div",{className:n.address?"billing__checkout__content__container__desc billing__checkout__content__container__desc--address":"billing__checkout__content__container__desc billing__checkout__content__container__desc--hidden billing__checkout__content__container__desc billing__checkout__content__container__desc--address",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"billing__checkout__content__container__desc__label",children:"shipping address"}),(0,o.jsx)("p",{children:"".concat(r.address.shipping.firstName," ").concat(r.address.shipping.lastName)}),(0,o.jsx)("p",{children:r.address.shipping.streetAddress}),""!==r.address.shipping.extendedAddress&&(0,o.jsx)("p",{children:r.address.shipping.extendedAddress}),(0,o.jsx)("p",{children:"".concat(r.address.shipping.locality,", ").concat(r.address.shipping.region,", ").concat(r.address.shipping.postalCode)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"billing__checkout__content__container__desc__label",children:"billing address"}),(0,o.jsx)("p",{children:"".concat(r.address.billing.firstName," ").concat(r.address.billing.lastName)}),(0,o.jsx)("p",{children:r.address.billing.streetAddress}),""!==r.address.billing.extendedAddress&&(0,o.jsx)("p",{children:r.address.billing.extendedAddress}),(0,o.jsx)("p",{children:"".concat(r.address.billing.locality,", ").concat(r.address.billing.region,", ").concat(r.address.billing.postalCode)})]}),(0,o.jsx)("p",{className:"billing__checkout__content__container__desc__edit",onClick:function(){(E(!0),i((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:!1})})),f.length>=1)&&document.querySelectorAll("#radio-button").forEach((function(e){e.checked=!1}));S||d((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:{shipping:{},billing:e.address.billing}})})),F||d((function(e){return(0,s.Z)((0,s.Z)({},e),{},{address:{shipping:e.address.shipping}})}))},children:"edit"})]})]})},p=i(3433),g=i(1243);var b=function(e){var n=e.cart,i=e.billingDetails,s=e.setPaymentSuccess,r=e.setPaymentFailed,_=e.setOrderId,d=e.subTotal,u=(0,c.useContext)(l.Lp),h=u.orders,m=u.setOrders,b=(0,c.useState)(!1),f=(0,t.Z)(b,2),x=f[0],j=f[1],N=(0,c.useState)(!0),v=(0,t.Z)(N,2),k=v[0],y=v[1],Z=(0,c.useState)(""),S=(0,t.Z)(Z,2),w=S[0],A=S[1],C=(0,c.useState)(!1),F=(0,t.Z)(C,2),q=F[0],D=F[1];return(0,c.useEffect)((function(){if(!x){var e=["https://js.braintreegateway.com/web/3.92.1/js/client.min.js","https://js.braintreegateway.com/web/3.92.1/js/hosted-fields.min.js"];e.forEach((function(n,i){var s=document.createElement("script");s.src=n,document.body.appendChild(s),e.length-1===i&&(s.onload=function(){j(!0)})}))}}),[x]),(0,c.useEffect)((function(){x&&g.Z.get("/payment/client_token").then((function(e){if(200===e.status){var t=document.querySelector("#hosted-fields-form"),c=document.querySelector("#payment-card-btn");window.braintree.client.create({authorization:e.data},(function(e,l){e?console.error(e):window.braintree.hostedFields.create({client:l,styles:{input:{"font-size":"13px"}},fields:{number:{selector:"#card-number",placeholder:"4111 1111 1111 1111",prefill:"4111 1111 1111 1111"},cvv:{selector:"#cvv",placeholder:"123",prefill:"123"},expirationDate:{selector:"#expiration-date",placeholder:"10/30",prefill:"10/30"}}},(function(e,l){e?console.error(e):(c.removeAttribute("disabled"),y(!1),t.addEventListener("submit",(function(e){e.preventDefault(),D(!0),l.tokenize((function(e,t){if(e)return A("Invalid card Details"),console.error(e),void D(!1);var c={payload:t,cart:n,billingDetails:i};g.Z.post("/payment/checkout",c).then((function(e){return e.data})).then((function(e){l.teardown((function(e){e?console.error("Could not tear down the Hosted Fields form!"):console.info("Hosted Fields form has been torn down!")})),D(!1),s(!0),m((function(e){return[].concat((0,p.Z)(e),[{_id:e.length,items:n,delivered:!1,customer:i.user,amount:(Number(d()/100)+Number(2*d()/1e4)).toFixed(2),shippingAddress:i.address.shipping,billingAddress:i.address.billing,date:(new Date).toISOString()}])})),_(h.length+1)})).catch((function(e){console.log(e),A("Something went worng please try again"),D(!1),r(!0)}))}))}),!1))}))}))}})).catch((function(e){console.log(e.message)}))}),[x,i,n,_,r,s,d,m,h]),x?(0,o.jsxs)("div",{className:"billing__checkout__content__container__form",children:[k&&(0,o.jsx)("div",{className:"loader-container",children:(0,o.jsx)("div",{className:"loader"})}),(0,o.jsxs)("form",{action:"/payment/checkout",method:"post",className:k?"billing__checkout__content__container__form__card billing__checkout__content__container__form__card--hidden":"billing__checkout__content__container__form__card",id:"hosted-fields-form",children:[(0,o.jsx)("p",{style:{marginTop:"10px"},className:"billing__checkout__content__container__form__input-container__error-msg",children:w&&(0,o.jsxs)("span",{children:[(0,o.jsx)(a.G,{icon:"circle",className:"icon"})," ",w]})}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"card-number",children:["card number ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("div",{id:"card-number",className:"hosted-field"})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__flex billing__checkout__content__container__form__flex--card",children:[(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"cvv",children:["cvv ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("div",{id:"cvv",className:"hosted-field"})]}),(0,o.jsxs)("div",{className:"billing__checkout__content__container__form__input-container",children:[(0,o.jsxs)("label",{htmlFor:"expiration-date",children:["Expiration date ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("div",{id:"expiration-date",className:"hosted-field"})]})]}),q?(0,o.jsx)("button",{type:"button",className:"payment-card-btn payment-card-btn--loading",disabled:!0,children:(0,o.jsx)("div",{className:"payment-card-btn__loading"})}):(0,o.jsx)("button",{type:"submit",disabled:!0,id:"payment-card-btn",children:"place order"})]})]}):(0,o.jsx)("div",{className:"loader-container",children:(0,o.jsx)("div",{className:"loader"})})};var f=function(){var e=(0,c.useContext)(l.s2),n=(0,c.useContext)(l.A9),i=n.cart,a=n.setCart,_=(0,c.useContext)(l.St).user,u=(0,c.useContext)(l.eI),h=(0,c.useState)({user:{},address:{shipping:{}}}),p=(0,t.Z)(h,2),g=p[0],f=p[1],x=(0,c.useState)({user:!1,address:!0,card:!0}),j=(0,t.Z)(x,2),N=j[0],v=j[1],k=(0,c.useState)(!1),y=(0,t.Z)(k,2),Z=y[0],S=y[1],w=(0,c.useState)(!1),A=(0,t.Z)(w,2),C=A[0],F=A[1],q=(0,c.useState)(""),D=(0,t.Z)(q,2),G=D[0],B=D[1];(0,c.useEffect)((function(){document.title="Checkout | Stand Out"}),[]),(0,c.useEffect)((function(){if("undefined"!==typeof _.name){v((function(e){return(0,s.Z)((0,s.Z)({},e),{},{user:!0})}));var e=_.name.split(" "),n=(0,t.Z)(e,2),i=n[0],c=n[1];f((function(e){return(0,s.Z)((0,s.Z)({},e),{},{user:{firstName:i,lastName:c,email:_.email}})}))}}),[_]);var E=function(){var e=0;return i.forEach((function(n){e+=Number(n.price*n.quantity)})),e};return i.length<1?(0,o.jsxs)("div",{className:"billing__tool-tip-container",children:[(0,o.jsxs)("div",{className:"billing__tool-tip-container__tool-tip",children:[(0,o.jsx)("p",{children:"No items in your cart. Go back to home page and add some items to purchase."}),(0,o.jsx)(r.rU,{to:"/",children:(0,o.jsx)("button",{children:"ok"})})]}),(0,o.jsx)(r.rU,{to:"/",children:(0,o.jsx)("div",{className:"billing__tool-tip-container__black-box"})})]}):(0,o.jsxs)("div",{className:"billing",children:[Z&&(0,o.jsxs)("div",{className:"billing__tool-tip-container",children:[(0,o.jsxs)("div",{className:"billing__tool-tip-container__tool-tip",children:[(0,o.jsx)("p",{children:"undefined"!==typeof _.name?"purchase successfull go to orders to see it.":"purchase successful. Your orderId is ".concat(G)}),(0,o.jsx)(r.rU,{to:"undefined"!==typeof _.name?"/your-orders":"/",children:(0,o.jsx)("button",{onClick:function(){a([])},children:"ok"})})]}),(0,o.jsx)(r.rU,{to:"undefined"!==typeof _.name?"/your-orders":"/",children:(0,o.jsx)("div",{className:"billing__tool-tip-container__black-box",onClick:function(){a([])}})})]}),C&&(0,o.jsxs)("div",{className:"billing__tool-tip-container",children:[(0,o.jsxs)("div",{className:"billing__tool-tip-container__tool-tip",children:[(0,o.jsx)("p",{children:"payment failed please try again."}),(0,o.jsx)("button",{onClick:function(){F(!1)},children:"ok"})]}),(0,o.jsx)("div",{className:"billing__tool-tip-container__black-box",onClick:function(){F(!1)}})]}),(0,o.jsxs)("div",{className:"billing__checkout",children:[(0,o.jsx)("h2",{className:"billing__checkout__label",children:"checkout"}),(0,o.jsxs)("div",{className:"billing__checkout__content",children:[(0,o.jsx)("p",{className:N.user?"billing__checkout__content__label billing__checkout__content__label--active":"billing__checkout__content__label",children:"1. contact information"}),(0,o.jsx)(d,{hidden:N,setHidden:v,billingDetails:g,setBillingDetails:f})]}),(0,o.jsxs)("div",{className:"billing__checkout__content",children:[(0,o.jsx)("p",{className:N.address?"billing__checkout__content__label billing__checkout__content__label--active":"billing__checkout__content__label",children:"2. shipping & billing address"}),(0,o.jsx)(m,{hidden:N,setHidden:v,billingDetails:g,setBillingDetails:f,user:_})]}),(0,o.jsxs)("div",{className:"billing__checkout__content",children:[(0,o.jsx)("p",{className:N.card?"billing__checkout__content__label billing__checkout__content__label--active":"billing__checkout__content__label",children:"3. payment"}),!N.card&&(0,o.jsx)(b,{cart:i,billingDetails:g,user:_,setPaymentSuccess:S,setPaymentFailed:F,setOrderId:B,setCart:a,subTotal:E})]})]}),(0,o.jsxs)("div",{className:"billing__cart",children:[(0,o.jsxs)("div",{className:"billing__cart__summary",children:[(0,o.jsx)("p",{className:"billing__cart__summary__label",children:"cart summary"}),(0,o.jsxs)("div",{className:"billing__cart__summary__desc",children:[(0,o.jsx)("p",{children:"Merchandise Subtotal"}),(0,o.jsx)("p",{children:"$ ".concat((E()/100).toFixed(2))})]}),(0,o.jsxs)("div",{className:"billing__cart__summary__desc",children:[(0,o.jsx)("p",{children:"Shipping Charges"}),(0,o.jsx)("p",{children:"FREE"})]}),(0,o.jsxs)("div",{className:"billing__cart__summary__desc",children:[(0,o.jsx)("p",{children:"Estimated Tax"}),(0,o.jsx)("p",{children:"$ ".concat((2*E()/1e4).toFixed(2))})]}),(0,o.jsxs)("div",{className:"billing__cart__summary__total",children:[(0,o.jsx)("p",{children:"Estimated Total (usd) :"}),(0,o.jsx)("p",{children:"$".concat((Number(E()/100)+Number(2*E()/1e4)).toFixed(2))})]})]}),(0,o.jsxs)("div",{className:"billing__cart__items",children:[(0,o.jsxs)("h3",{className:"billing__cart__items__label",children:["cart ",(0,o.jsxs)("span",{children:["(",function(){var e=0;return i.forEach((function(n){e+=n.quantity})),e}()," Items)"]})]}),i.map((function(n,i){return(0,o.jsx)("div",{className:"billing__cart__items__item",children:(0,o.jsxs)("div",{className:"billing__cart__items__item__content",children:[(0,o.jsx)("div",{className:"billing__cart__items__item__content__img",children:(0,o.jsx)(r.rU,{to:"/item/".concat(n._id),children:(0,o.jsx)("img",{src:e(100)+n.image,alt:n.name,onError:function(e){e.target.src="/images/imgFailed.jpg"}})})}),(0,o.jsxs)("div",{className:"billing__cart__items__item__content__desc",children:[(0,o.jsx)(r.rU,{to:"/item/".concat(n._id),children:(0,o.jsx)("p",{className:"billing__cart__items__item__content__desc__name",children:n.name})}),(0,o.jsx)("p",{children:"$ ".concat((n.price*n.quantity/100).toFixed(2))}),(0,o.jsxs)("p",{children:["color: ",u.filter((function(e){return e[1]===n.color}))[0][0]]}),(0,o.jsxs)("p",{children:["size: ",n.size]}),(0,o.jsx)("p",{children:"Qty: ".concat(n.quantity)})]})]})},i)}))]})]})]})}}}]);
//# sourceMappingURL=399.7c75154d.chunk.js.map