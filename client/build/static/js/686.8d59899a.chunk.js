"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[686],{9686:function(e,n,o){o.r(n),o.d(n,{default:function(){return j}});var t=o(4165),s=o(2982),i=o(5861),r=o(885),c=o(2791),a=o(4542),l=o(9271),d=o(4569),u=o.n(d),_=(o(9842),o(8567)),m=o(4942),p=o(1413),f=o(1363),x=o(184);var h=function(e){var n=e.stockIndex,o=e.control,t=e.register,s=e.errors,i=e.getValues,r=(0,a.Dq)({control:o,name:"stock[".concat(n,"].sizeRemaining")}),l=r.fields,d=r.remove,u=r.append;return(0,c.useEffect)((function(){l.length<1&&u({remaining:""},!1)}),[u,l]),(0,x.jsx)("div",{children:l.map((function(e,o){return(0,x.jsxs)("div",{className:"upload__form__flex",children:[(0,x.jsxs)("div",{className:"upload__form__input-container",children:[(0,x.jsxs)("label",{htmlFor:"stock[".concat(n,"].sizeRemaining[").concat(o,"].size"),children:["size ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsx)("input",{name:"stock[".concat(n,"].sizeRemaining[").concat(o,"].size"),className:"upload__form__input-container__size",placeholder:"XL or 8 or 7.5",ref:t({required:"required"}),defaultValue:e.size}),"undefined"!==typeof s.stock&&(0,x.jsx)("p",{className:"upload__form__input-container__error-msg",children:"undefined"!==typeof s.stock[n]&&"undefined"!==typeof s.stock[n].sizeRemaining&&"undefined"!==typeof s.stock[n].sizeRemaining[o]&&"undefined"!==typeof s.stock[n].sizeRemaining[o].size&&(0,x.jsxs)("span",{children:[(0,x.jsx)(f.G,{icon:"circle",className:"icon"})," ",s.stock[n].sizeRemaining[o].size.message]})})]}),(0,x.jsxs)("div",{className:"upload__form__input-container",children:[(0,x.jsxs)("label",{htmlFor:"stock[".concat(n,"].sizeRemaining[").concat(o,"].remaining"),children:["remaining ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsx)("input",{name:"stock[".concat(n,"].sizeRemaining[").concat(o,"].remaining"),placeholder:"76",className:"upload__form__input-container__remaining",ref:t({pattern:{value:/^\d+$/,message:"Should be number"},required:"required"}),defaultValue:e.remaining}),"undefined"!==typeof s.stock&&(0,x.jsx)("p",{className:"upload__form__input-container__error-msg",children:"undefined"!==typeof s.stock[n]&&"undefined"!==typeof s.stock[n].sizeRemaining&&"undefined"!==typeof s.stock[n].sizeRemaining[o]&&"undefined"!==typeof s.stock[n].sizeRemaining[o].remaining&&(0,x.jsxs)("span",{children:[(0,x.jsx)(f.G,{icon:"circle",className:"icon"})," ",s.stock[n].sizeRemaining[o].remaining.message]})})]}),(0,x.jsxs)("div",{className:"upload__form__flex__button-container",children:[(0,x.jsx)("button",{type:"button",className:"upload__form__flex__button-container__remove-button",onClick:function(){i().stock[n].sizeRemaining.length>1&&d(o)},children:(0,x.jsx)(f.G,{icon:"minus"})}),(0,x.jsx)("button",{type:"button",className:"upload__form__flex__button-container__add-button",onClick:function(){return u({size:"",remaining:""})},children:(0,x.jsx)(f.G,{icon:"plus"})})]})]},e.id)}))})};var g=function(e){var n=e.control,o=e.register,t=e.errors,s=e.images,i=e.setImages,a=e.getValues,l=e.colors,d=e.setValue,u=e.index,_=e.field,g=e.append,j=e.remove,v=(0,c.useRef)(null),b=(0,c.useRef)(null),k=(0,c.useState)(l[0]),y=(0,r.Z)(k,2),N=y[0],w=y[1],C=(0,c.useState)(!0),z=(0,r.Z)(C,2),R=z[0],Z=z[1],O=(0,c.useCallback)((function(e){Z(!0)}),[]);return(0,c.useEffect)((function(){if(v.current)return window.addEventListener("click",O),function(){window.removeEventListener("click",O)}}),[v,O]),(0,c.useEffect)((function(){b&&(b.current.scrollTop="0")}),[R,b]),(0,x.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock",children:[(0,x.jsxs)("div",{className:"upload__form__input-container",children:[(0,x.jsxs)("label",{htmlFor:"stock[".concat(u,"].images"),children:["image ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone",onDrop:function(e){e.preventDefault();for(var n=function(n){var o=new FileReader;o.onload=function(e){i((function(e){var n="undefined"==typeof e[_.id]?[o.result]:e[_.id].concat(o.result);return(0,p.Z)((0,p.Z)({},e),{},(0,m.Z)({},_.id,n))}))},o.readAsDataURL(e.dataTransfer.files[n])},o=0;o<e.dataTransfer.files.length;o++)n(o)},onDragOver:function(e){e.preventDefault()},children:["undefined"==typeof s[_.id]||s[_.id].length<1?(0,x.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone__upload-desc",children:[(0,x.jsx)(f.G,{className:"icon",icon:"cloud-upload-alt"}),(0,x.jsx)("p",{children:"Drag & drop or click to upload"})]}):(0,x.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone__images-container",children:[(0,x.jsx)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone__images-container__images",children:s[_.id].map((function(e,n){return(0,x.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone__images-container__images__image",children:[(0,x.jsx)("img",{src:e,alt:"uploaded"}),(0,x.jsx)("button",{type:"button",onClick:function(n){i((function(n){return(0,p.Z)((0,p.Z)({},n),{},(0,m.Z)({},_.id,n[_.id].filter((function(n){return n!==e}))))}))},children:(0,x.jsx)(f.G,{icon:"times"})})]},n)}))}),(0,x.jsx)("p",{children:"Hover on image and click X to delete images"})]}),(0,x.jsx)("input",{type:"file",multiple:!0,onChange:function(e){for(var n=function(){var n=new FileReader;n.onload=function(e){i((function(e){var o="undefined"==typeof e[_.id]?[n.result]:e[_.id].concat(n.result);return(0,p.Z)((0,p.Z)({},e),{},(0,m.Z)({},_.id,o))}))},n.readAsDataURL(e.target.files[o])},o=0;o<e.target.files.length;o++)n()},name:"stock[".concat(u,"].images"),ref:o(),defaultValue:_.images})]})]}),(0,x.jsxs)("div",{className:"upload__form__input-container",children:[(0,x.jsxs)("label",{htmlFor:"stock[".concat(u,"].color"),children:["color ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsxs)("div",{className:"upload__form__input-container__dropdown-container",ref:v,tabIndex:"0",onClick:function(e){e.stopPropagation(),Z((function(e){return!e}))},children:[(0,x.jsxs)("div",{className:R?"upload__form__input-container__dropdown-container__box":"upload__form__input-container__dropdown-container__box upload__form__input-container__dropdown-container__box--active",children:[(0,x.jsx)("p",{children:N[0]}),(0,x.jsx)("div",{className:"upload__form__input-container__dropdown-container__color",style:{backgroundColor:N[1]}}),(0,x.jsx)(f.G,{icon:"chevron-right",className:"icon"})]}),(0,x.jsx)("div",{ref:b,className:R?"upload__form__input-container__dropdown-container__dropdown-options":"upload__form__input-container__dropdown-container__dropdown-options upload__form__input-container__dropdown-container__dropdown-options--visible",children:l.map((function(e,n){return(0,x.jsxs)("div",{style:{paddingRight:window.innerWidth-document.body.clientWidth===0?"40px":"23px"},className:N[0]===e[0]?"upload__form__input-container__dropdown-container__dropdown-options__box upload__form__input-container__dropdown-container__dropdown-options__box--active":"upload__form__input-container__dropdown-container__dropdown-options__box",onClick:function(){w(e),d("stock[".concat(u,"].color"),e[1])},children:[(0,x.jsx)("p",{children:e[0]}),(0,x.jsx)("div",{className:"upload__form__input-container__dropdown-container__color",style:{backgroundColor:e[1]}})]},n)}))})]}),(0,x.jsx)("input",{name:"stock[".concat(u,"].color"),type:"hidden",ref:o(),defaultValue:N[1]}),"undefined"!==typeof t.stock&&(0,x.jsx)("p",{className:"upload__form__input-container__error-msg",children:"undefined"!==typeof t.stock[u]&&"undefined"!==typeof t.stock[u].color&&(0,x.jsxs)("span",{children:[(0,x.jsx)(f.G,{icon:"circle",className:"icon"})," ",t.stock[u].color.message]})})]}),(0,x.jsx)("div",{children:(0,x.jsx)(h,{stockIndex:u,control:n,register:o,errors:t,getValues:a})}),(0,x.jsxs)("div",{className:"upload__form__button-container",children:[(0,x.jsx)("button",{type:"button",className:"upload__form__button-container__delete-button",onClick:function(){a().stock.length>1&&(j(u),i((function(e){return delete e[_.id],e})))},children:(0,x.jsx)(f.G,{icon:"trash"})}),(0,x.jsx)("button",{type:"button",className:"upload__form__button-container__add-button",onClick:function(){g({image:[],color:"",sizeRemaining:[{size:"",remaining:""}]})},children:(0,x.jsx)(f.G,{icon:"plus"})})]})]})};var j=function(){var e=(0,l.k6)(),n=(0,c.useContext)(_.ProductsContext).uploadOptions,o=(0,c.useContext)(_.UserContext).user,d=(0,c.useContext)(_.UserProductsContext).setUserProducts,m=(0,c.useContext)(_.UserCountContext),p=m.userCount,h=m.setUserCount,j=(0,c.useContext)(_.ColorsContext),v=(0,c.useState)("women"),b=(0,r.Z)(v,2),k=b[0],y=b[1],N=(0,c.useState)(n.women[0]),w=(0,r.Z)(N,2),C=w[0],z=w[1],R=(0,c.useState)({}),Z=(0,r.Z)(R,2),O=Z[0],S=Z[1],G=(0,c.useState)(""),T=(0,r.Z)(G,2),D=T[0],P=T[1],E=(0,c.useState)(""),V=(0,r.Z)(E,2),F=V[0],q=V[1],U=(0,c.useState)(!1),I=(0,r.Z)(U,2),L=I[0],A=I[1],$=(0,c.useState)(!1),M=(0,r.Z)($,2),W=M[0],X=M[1],H=(0,c.useState)(!0),B=(0,r.Z)(H,2),J=B[0],K=B[1];(0,c.useEffect)((function(){document.title="Upload Item | Stand Out"}),[]),(0,c.useEffect)((function(){"undefined"!==typeof o.name?u().get("/user/is-admin").then((function(n){if(200!==n.status)throw new Error;"admin"===n.data?K(!1):e.push("404")})).catch((function(e){console.log(e)})):e.replace("/404")}),[o.name,e]),(0,c.useEffect)((function(){if(""!==F){var e=setTimeout((function(){q("")}),3400),n=setTimeout((function(){A(!0)}),1),o=setTimeout((function(){A(!1)}),3e3);return function(){clearTimeout(e),clearTimeout(n),clearTimeout(o)}}}),[F]),(0,c.useEffect)((function(){if(""!==D){var e=setTimeout((function(){P("")}),3400),n=setTimeout((function(){A(!0)}),1),o=setTimeout((function(){A(!1)}),3e3);return function(){clearTimeout(e),clearTimeout(n),clearTimeout(o)}}}),[D]);var Q=(0,a.cI)({defaultValues:{catagory:k,type:C,stock:[{image:[],color:""}]}}),Y=Q.register,ee=Q.handleSubmit,ne=Q.errors,oe=Q.control,te=Q.getValues,se=Q.reset,ie=Q.setValue,re=(0,a.Dq)({control:oe,name:"stock"}),ce=re.fields,ae=re.append,le=re.remove,de=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){var o,i,r,c,a,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X(!0),e.prev=1,o=Math.round(100*n.price),i=p,r="".concat((new Date).getTime()),c={_id:"".concat(i),name:n.name,price:o,catagory:n.catagory,type:n.type,createdAt:r,stock:[]},a=Object.values(O),l=0;case 8:if(!(l<n.stock.length)){e.next=16;break}if("undefined"!==typeof a[l]){e.next=11;break}throw new Error;case 11:c.stock.push({_id:"".concat(i+1),images:a[l],color:n.stock[l].color,sizeRemaining:n.stock[l].sizeRemaining}),i+=1;case 13:l++,e.next=8;break;case 16:d((function(e){return[].concat((0,s.Z)(e),[c])})),h(i+1),P("Product Uploaded Successfully"),se(),ie("catagory",k),ie("type",C),S({}),X(!1),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(1),console.log(e.t0),q("Something went wrong. Please try again"),X(!1);case 31:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(n){return e.apply(this,arguments)}}();return J?(0,x.jsx)("div",{className:"loader-container",children:(0,x.jsx)("div",{className:"loader"})}):(0,x.jsxs)("div",{className:"upload",children:[""!==F&&(0,x.jsxs)("div",{className:L?"msg msg--visible":"msg",children:[(0,x.jsx)(f.G,{icon:["far","times-circle"],className:"icon",onClick:function(){P("")}}),(0,x.jsx)("p",{children:F})]}),""!==D&&(0,x.jsxs)("div",{className:L?"msg msg--visible":"msg",children:[(0,x.jsx)(f.G,{icon:["far","check-circle"],className:"icon",onClick:function(){P("")}}),(0,x.jsx)("p",{children:D})]}),(0,x.jsx)("h1",{children:"upload products"}),(0,x.jsxs)("form",{className:"upload__form",onSubmit:ee(de),children:[(0,x.jsxs)("div",{className:"upload__form__input-container",children:[(0,x.jsxs)("label",{htmlFor:"name",children:["name ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsx)("input",{name:"name",autoFocus:!0,ref:Y({pattern:{value:/^[\w/d ]{0,}[\w-/d]{2,}[\w-/d ]{0,}$/,message:'should only be 2 or more than 2 letters, "-"'},required:"Required"})}),"undefined"!==typeof ne.name&&(0,x.jsxs)("p",{className:"upload__form__input-container__error-msg",children:[(0,x.jsx)(f.G,{icon:"circle",className:"icon"})," ",ne.name.message]})]}),(0,x.jsxs)("div",{className:"upload__form__input-container",children:[(0,x.jsxs)("label",{htmlFor:"price",children:["price ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsx)("input",{name:"price",className:"upload__form__input-container__price",placeholder:"20 or 20.55 (in USD)",ref:Y({required:"Required",pattern:{value:/^(\d+)(\.\d+)?$/,message:"Must be numbers or decimals"}})}),"undefined"!==typeof ne.price&&(0,x.jsxs)("p",{className:"upload__form__input-container__error-msg",children:[(0,x.jsx)(f.G,{icon:"circle",className:"icon"})," ",ne.price.message]})]}),(0,x.jsxs)("div",{className:"upload__form__flex",children:[(0,x.jsxs)("div",{className:"upload__form__input-container",children:[(0,x.jsxs)("label",{htmlFor:"catagory",children:["catagory ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsxs)("div",{className:"upload__form__input-container__select-container",children:[(0,x.jsxs)("select",{name:"catagory",onChange:function(e){return y(e.target.value)},ref:Y,children:[(0,x.jsx)("option",{value:"women",children:"women"}),(0,x.jsx)("option",{value:"men",children:"men"}),(0,x.jsx)("option",{value:"both",children:"both"})]}),(0,x.jsx)(f.G,{icon:"chevron-right",className:"icon"})]})]}),(0,x.jsxs)("div",{className:" upload__form__input-container",children:[(0,x.jsxs)("label",{htmlFor:"type",children:["type ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsxs)("div",{className:"upload__form__input-container__select-container",children:[(0,x.jsx)("select",{name:"type",ref:Y,onChange:function(e){z(e.target.value)},children:n[k].map((function(e,n){return(0,x.jsx)("option",{value:e.toLowerCase(),children:e},n)}))}),(0,x.jsx)(f.G,{icon:"chevron-right",className:"icon"})]})]})]}),(0,x.jsxs)("div",{className:" upload__form__input-container upload__form__stocks-box",children:[(0,x.jsxs)("label",{htmlFor:"stock",children:["stock ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsx)("div",{className:"upload__form__stocks-box__stocks-container",children:ce.map((function(e,n){return(0,x.jsx)(g,{control:oe,register:Y,errors:ne,images:O,setImages:S,getValues:te,colors:j,setValue:ie,index:n,field:e,append:ae,remove:le},e.id)}))})]}),(0,x.jsx)("button",{className:W?"upload__form__submit-button upload__form__submit-button--loading":"upload__form__submit-button",type:"submit",children:W?(0,x.jsx)("div",{className:"upload__form__submit-button__loader"}):"upload"})]})]})}},9842:function(){},1413:function(e,n,o){o.d(n,{Z:function(){return i}});var t=o(4942);function s(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function i(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?s(Object(o),!0).forEach((function(n){(0,t.Z)(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}}}]);
//# sourceMappingURL=686.8d59899a.chunk.js.map