"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[686],{9686:function(e,n,o){o.r(n),o.d(n,{default:function(){return g}});var t=o(1413),i=o(4165),s=o(3433),a=o(5861),c=o(9439),r=o(2791),l=o(1134),d=o(1243),u=(o(9842),o(9331)),_=o(4942),m=o(1363),p=o(184);var f=function(e){var n=e.stockIndex,o=e.control,i=e.register,s=e.errors,a=e.getValues,c=(0,l.Dq)({control:o,name:"stock[".concat(n,"].sizeRemaining")}),r=c.fields,d=c.remove,u=c.append;return(0,p.jsx)("div",{children:r.map((function(e,o){return(0,p.jsxs)("div",{className:"upload__form__flex",children:[(0,p.jsxs)("div",{className:"upload__form__input-container",children:[(0,p.jsxs)("label",{htmlFor:"stock[".concat(n,"].sizeRemaining[").concat(o,"].size"),children:["size ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",(0,t.Z)((0,t.Z)({name:"stock[".concat(n,"].sizeRemaining[").concat(o,"].size"),className:"upload__form__input-container__size",placeholder:"XL or 8 or 7.5"},i("stock[".concat(n,"].sizeRemaining[").concat(o,"].size"),{required:"required"})),{},{defaultValue:e.size})),"undefined"!==typeof s.stock&&(0,p.jsx)("p",{className:"upload__form__input-container__error-msg",children:"undefined"!==typeof s.stock[n]&&"undefined"!==typeof s.stock[n].sizeRemaining&&"undefined"!==typeof s.stock[n].sizeRemaining[o]&&"undefined"!==typeof s.stock[n].sizeRemaining[o].size&&(0,p.jsxs)("span",{children:[(0,p.jsx)(m.G,{icon:"circle",className:"icon"})," ",s.stock[n].sizeRemaining[o].size.message]})})]}),(0,p.jsxs)("div",{className:"upload__form__input-container",children:[(0,p.jsxs)("label",{htmlFor:"stock[".concat(n,"].sizeRemaining[").concat(o,"].remaining"),children:["remaining ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",(0,t.Z)((0,t.Z)({name:"stock[".concat(n,"].sizeRemaining[").concat(o,"].remaining"),placeholder:"76",className:"upload__form__input-container__remaining"},i("stock[".concat(n,"].sizeRemaining[").concat(o,"].remaining"),{pattern:{value:/^\d+$/,message:"Should be number"},required:"required"})),{},{defaultValue:e.remaining})),"undefined"!==typeof s.stock&&(0,p.jsx)("p",{className:"upload__form__input-container__error-msg",children:"undefined"!==typeof s.stock[n]&&"undefined"!==typeof s.stock[n].sizeRemaining&&"undefined"!==typeof s.stock[n].sizeRemaining[o]&&"undefined"!==typeof s.stock[n].sizeRemaining[o].remaining&&(0,p.jsxs)("span",{children:[(0,p.jsx)(m.G,{icon:"circle",className:"icon"})," ",s.stock[n].sizeRemaining[o].remaining.message]})})]}),(0,p.jsxs)("div",{className:"upload__form__flex__button-container",children:[(0,p.jsx)("button",{type:"button",className:"upload__form__flex__button-container__remove-button",onClick:function(){a().stock[n].sizeRemaining.length>1&&d(o)},children:(0,p.jsx)(m.G,{icon:"minus"})}),(0,p.jsx)("button",{type:"button",className:"upload__form__flex__button-container__add-button",onClick:function(){return u({size:"",remaining:""})},children:(0,p.jsx)(m.G,{icon:"plus"})})]})]},e.id)}))})};var x=function(e){var n=e.control,o=e.register,i=e.errors,s=e.images,a=e.setImages,l=e.getValues,d=e.colors,u=e.setValue,x=e.index,h=e.field,g=e.append,j=e.remove,v=(0,r.useRef)(null),k=(0,r.useRef)(null),b=(0,r.useState)(d[0]),N=(0,c.Z)(b,2),y=N[0],w=N[1],Z=(0,r.useState)(!0),z=(0,c.Z)(Z,2),R=z[0],C=z[1],S=(0,r.useCallback)((function(e){C(!0)}),[]);return(0,r.useEffect)((function(){if(v.current)return window.addEventListener("click",S),function(){window.removeEventListener("click",S)}}),[v,S]),(0,r.useEffect)((function(){k&&(k.current.scrollTop="0")}),[R,k]),(0,p.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock",children:[(0,p.jsxs)("div",{className:"upload__form__input-container",children:[(0,p.jsxs)("label",{htmlFor:"stock[".concat(x,"].images"),children:["image ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone",onDrop:function(e){e.preventDefault();for(var n=function(){var n=new FileReader;n.onload=function(e){a((function(e){var o="undefined"==typeof e[h.id]?[n.result]:e[h.id].concat(n.result);return(0,t.Z)((0,t.Z)({},e),{},(0,_.Z)({},h.id,o))}))},n.readAsDataURL(e.dataTransfer.files[o])},o=0;o<e.dataTransfer.files.length;o++)n()},onDragOver:function(e){e.preventDefault()},children:["undefined"==typeof s[h.id]||s[h.id].length<1?(0,p.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone__upload-desc",children:[(0,p.jsx)(m.G,{className:"icon",icon:"cloud-upload-alt"}),(0,p.jsx)("p",{children:"Drag & drop or click to upload"})]}):(0,p.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone__images-container",children:[(0,p.jsx)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone__images-container__images",children:s[h.id].map((function(e,n){return(0,p.jsxs)("div",{className:"upload__form__stocks-box__stocks-container__stock__drop-zone__images-container__images__image",children:[(0,p.jsx)("img",{src:e,alt:"uploaded"}),(0,p.jsx)("button",{type:"button",onClick:function(n){a((function(n){return(0,t.Z)((0,t.Z)({},n),{},(0,_.Z)({},h.id,n[h.id].filter((function(n){return n!==e}))))}))},children:(0,p.jsx)(m.G,{icon:"times"})})]},n)}))}),(0,p.jsx)("p",{children:"Hover on image and click X to delete images"})]}),(0,p.jsx)("input",(0,t.Z)({type:"file",multiple:!0,onInput:function(e){for(var n=function(){var n=new FileReader;n.onload=function(e){a((function(e){var o="undefined"==typeof e[h.id]?[n.result]:e[h.id].concat(n.result);return(0,t.Z)((0,t.Z)({},e),{},(0,_.Z)({},h.id,o))}))},n.readAsDataURL(e.target.files[o])},o=0;o<e.target.files.length;o++)n()},onChange:function(e){for(var n=function(){var n=new FileReader;n.onload=function(e){a((function(e){var o="undefined"==typeof e[h.id]?[n.result]:e[h.id].concat(n.result);return(0,t.Z)((0,t.Z)({},e),{},(0,_.Z)({},h.id,o))}))},n.readAsDataURL(e.target.files[o])},o=0;o<e.target.files.length;o++)n()},name:"stock[".concat(x,"].images")},o("stock[".concat(x,"].images"))))]})]}),(0,p.jsxs)("div",{className:"upload__form__input-container",children:[(0,p.jsxs)("label",{htmlFor:"stock[".concat(x,"].color"),children:["color ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsxs)("div",{className:"upload__form__input-container__dropdown-container",ref:v,tabIndex:"0",onClick:function(e){e.stopPropagation(),C((function(e){return!e}))},children:[(0,p.jsxs)("div",{className:R?"upload__form__input-container__dropdown-container__box":"upload__form__input-container__dropdown-container__box upload__form__input-container__dropdown-container__box--active",children:[(0,p.jsx)("p",{children:y[0]}),(0,p.jsx)("div",{className:"upload__form__input-container__dropdown-container__color",style:{backgroundColor:y[1]}}),(0,p.jsx)(m.G,{icon:"chevron-right",className:"icon"})]}),(0,p.jsx)("div",{ref:k,className:R?"upload__form__input-container__dropdown-container__dropdown-options":"upload__form__input-container__dropdown-container__dropdown-options upload__form__input-container__dropdown-container__dropdown-options--visible",children:d.map((function(e,n){return(0,p.jsxs)("div",{style:{paddingRight:window.innerWidth-document.body.clientWidth===0?"40px":"23px"},className:y[0]===e[0]?"upload__form__input-container__dropdown-container__dropdown-options__box upload__form__input-container__dropdown-container__dropdown-options__box--active":"upload__form__input-container__dropdown-container__dropdown-options__box",onClick:function(){w(e),u("stock[".concat(x,"].color"),e[1])},children:[(0,p.jsx)("p",{children:e[0]}),(0,p.jsx)("div",{className:"upload__form__input-container__dropdown-container__color",style:{backgroundColor:e[1]}})]},n)}))})]}),(0,p.jsx)("input",(0,t.Z)((0,t.Z)({name:"stock[".concat(x,"].color"),type:"hidden"},o("stock[".concat(x,"].color"))),{},{defaultValue:y[1]})),"undefined"!==typeof i.stock&&(0,p.jsx)("p",{className:"upload__form__input-container__error-msg",children:"undefined"!==typeof i.stock[x]&&"undefined"!==typeof i.stock[x].color&&(0,p.jsxs)("span",{children:[(0,p.jsx)(m.G,{icon:"circle",className:"icon"})," ",i.stock[x].color.message]})})]}),(0,p.jsx)("div",{children:(0,p.jsx)(f,{stockIndex:x,control:n,register:o,errors:i,getValues:l})}),(0,p.jsxs)("div",{className:"upload__form__button-container",children:[(0,p.jsx)("button",{type:"button",className:"upload__form__button-container__delete-button",onClick:function(){l().stock.length>1&&(j(x),a((function(e){return delete e[h.id],e})))},children:(0,p.jsx)(m.G,{icon:"trash"})}),(0,p.jsx)("button",{type:"button",className:"upload__form__button-container__add-button",onClick:function(){g({image:[],color:d[0][1],sizeRemaining:[{size:"",remaining:""}]})},children:(0,p.jsx)(m.G,{icon:"plus"})})]})]})},h=o(7689);var g=function(){var e=(0,h.s0)(),n=(0,r.useContext)(u.BZ).uploadOptions,o=(0,r.useContext)(u.St).user,_=(0,r.useContext)(u.ZP).setUserProducts,f=(0,r.useContext)(u.Zv),g=f.userCount,j=f.setUserCount,v=(0,r.useContext)(u.eI),k=(0,r.useState)("women"),b=(0,c.Z)(k,2),N=b[0],y=b[1],w=(0,r.useState)(n.women[0]),Z=(0,c.Z)(w,2),z=Z[0],R=Z[1],C=(0,r.useState)({}),S=(0,c.Z)(C,2),G=S[0],T=S[1],F=(0,r.useState)(""),D=(0,c.Z)(F,2),V=D[0],q=D[1],E=(0,r.useState)(""),I=(0,c.Z)(E,2),U=I[0],L=I[1],P=(0,r.useState)(!1),A=(0,c.Z)(P,2),O=A[0],$=A[1],M=(0,r.useState)(!1),W=(0,c.Z)(M,2),X=W[0],B=W[1],H=(0,r.useState)(!0),J=(0,c.Z)(H,2),K=J[0],Q=J[1];(0,r.useEffect)((function(){document.title="Upload Item | Stand Out"}),[]),(0,r.useEffect)((function(){"undefined"!==typeof o.name?d.Z.get("/user/is-admin").then((function(n){if(200!==n.status)throw new Error;"admin"===n.data?Q(!1):e("/404")})).catch((function(e){console.log(e)})):e("/404",{replace:!0})}),[o.name,e]),(0,r.useEffect)((function(){if(""!==U){var e=setTimeout((function(){L("")}),3400),n=setTimeout((function(){$(!0)}),1),o=setTimeout((function(){$(!1)}),3e3);return function(){clearTimeout(e),clearTimeout(n),clearTimeout(o)}}}),[U]),(0,r.useEffect)((function(){if(""!==V){var e=setTimeout((function(){q("")}),3400),n=setTimeout((function(){$(!0)}),1),o=setTimeout((function(){$(!1)}),3e3);return function(){clearTimeout(e),clearTimeout(n),clearTimeout(o)}}}),[V]);var Y=(0,l.cI)({defaultValues:{catagory:N,type:z,stock:[{image:[],color:v[0][1],sizeRemaining:[{size:"",remaining:""}]}]}}),ee=Y.register,ne=Y.handleSubmit,oe=Y.formState.errors,te=Y.control,ie=Y.getValues,se=Y.reset,ae=Y.setValue,ce=(0,l.Dq)({control:te,name:"stock"}),re=ce.fields,le=ce.append,de=ce.remove,ue=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var o,t,a,c,r,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(!0),e.prev=1,o=Math.round(100*n.price),t=g,a="".concat((new Date).getTime()),c={_id:"".concat(t),name:n.name,price:o,catagory:n.catagory,type:n.type,createdAt:a,stock:[]},r=Object.values(G),l=0;case 8:if(!(l<n.stock.length)){e.next=16;break}if("undefined"!==typeof r[l]){e.next=11;break}throw new Error;case 11:c.stock.push({_id:"".concat(t+1),images:r[l],color:n.stock[l].color,sizeRemaining:n.stock[l].sizeRemaining}),t+=1;case 13:l++,e.next=8;break;case 16:_((function(e){return[].concat((0,s.Z)(e),[c])})),j(t+1),q("Product Uploaded Successfully"),se(),ae("catagory",N),ae("type",z),T({}),B(!1),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(1),console.log(e.t0),L("Something went wrong. Please try again"),B(!1);case 31:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(n){return e.apply(this,arguments)}}();return K?(0,p.jsx)("div",{className:"loader-container",children:(0,p.jsx)("div",{className:"loader"})}):(0,p.jsxs)("div",{className:"upload",children:[""!==U&&(0,p.jsxs)("div",{className:O?"msg msg--visible":"msg",children:[(0,p.jsx)(m.G,{icon:["far","times-circle"],className:"icon",onClick:function(){q("")}}),(0,p.jsx)("p",{children:U})]}),""!==V&&(0,p.jsxs)("div",{className:O?"msg msg--visible":"msg",children:[(0,p.jsx)(m.G,{icon:["far","check-circle"],className:"icon",onClick:function(){q("")}}),(0,p.jsx)("p",{children:V})]}),(0,p.jsx)("h1",{children:"upload products"}),(0,p.jsxs)("form",{className:"upload__form",onSubmit:ne(ue),children:[(0,p.jsxs)("div",{className:"upload__form__input-container",children:[(0,p.jsxs)("label",{htmlFor:"name",children:["name ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",(0,t.Z)({name:"name",autoFocus:!0},ee("name",{pattern:{value:/^[\w/d ]{0,}[\w-/d]{2,}[\w-/d ]{0,}$/,message:'should only be 2 or more than 2 letters, "-"'},required:"Required"}))),"undefined"!==typeof oe.name&&(0,p.jsxs)("p",{className:"upload__form__input-container__error-msg",children:[(0,p.jsx)(m.G,{icon:"circle",className:"icon"})," ",oe.name.message]})]}),(0,p.jsxs)("div",{className:"upload__form__input-container",children:[(0,p.jsxs)("label",{htmlFor:"price",children:["price ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",(0,t.Z)({name:"price",className:"upload__form__input-container__price",placeholder:"20 or 20.55 (in USD)"},ee("price",{required:"Required",pattern:{value:/^(\d+)(\.\d+)?$/,message:"Must be numbers or decimals"}}))),"undefined"!==typeof oe.price&&(0,p.jsxs)("p",{className:"upload__form__input-container__error-msg",children:[(0,p.jsx)(m.G,{icon:"circle",className:"icon"})," ",oe.price.message]})]}),(0,p.jsxs)("div",{className:"upload__form__flex",children:[(0,p.jsxs)("div",{className:"upload__form__input-container",children:[(0,p.jsxs)("label",{htmlFor:"catagory",children:["catagory ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsxs)("div",{className:"upload__form__input-container__select-container",children:[(0,p.jsxs)("select",(0,t.Z)((0,t.Z)({name:"catagory",onChange:function(e){return y(e.target.value)}},ee("catagory")),{},{children:[(0,p.jsx)("option",{value:"women",children:"women"}),(0,p.jsx)("option",{value:"men",children:"men"}),(0,p.jsx)("option",{value:"both",children:"both"})]})),(0,p.jsx)(m.G,{icon:"chevron-right",className:"icon"})]})]}),(0,p.jsxs)("div",{className:" upload__form__input-container",children:[(0,p.jsxs)("label",{htmlFor:"type",children:["type ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsxs)("div",{className:"upload__form__input-container__select-container",children:[(0,p.jsx)("select",(0,t.Z)((0,t.Z)({name:"type"},ee("type")),{},{onChange:function(e){R(e.target.value)},children:n[N].map((function(e,n){return(0,p.jsx)("option",{value:e.toLowerCase(),children:e},n)}))})),(0,p.jsx)(m.G,{icon:"chevron-right",className:"icon"})]})]})]}),(0,p.jsxs)("div",{className:" upload__form__input-container upload__form__stocks-box",children:[(0,p.jsxs)("label",{htmlFor:"stock",children:["stock ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("div",{className:"upload__form__stocks-box__stocks-container",children:re.map((function(e,n){return(0,p.jsx)(x,{control:te,register:ee,errors:oe,images:G,setImages:T,getValues:ie,colors:v,setValue:ae,index:n,field:e,append:le,remove:de},e.id)}))})]}),(0,p.jsx)("button",{className:X?"upload__form__submit-button upload__form__submit-button--loading":"upload__form__submit-button",type:"submit",children:X?(0,p.jsx)("div",{className:"upload__form__submit-button__loader"}):"upload"})]})]})}},9842:function(){}}]);
//# sourceMappingURL=686.9fd2a791.chunk.js.map