"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[258],{6258:function(e,n,s){s.r(n),s.d(n,{default:function(){return x}});var o=s(1413),a=s(9439),i=s(2791),r=s(1134),t=s(1243),c=s(1363),d=s(9331),_=s(4165),l=s(5861),p=s(184);var u=function(e){var n=e.userAddresses,s=e.usStates,r=e.errors,t=e.register,d=e.watch,u=e.setValue,f=e.trigger,m=e.field,h=e.index,x=e.remove,j=(0,i.useState)("undefined"===typeof m._id),N=(0,a.Z)(j,2),g=N[0],v=N[1];return(0,p.jsxs)("div",{className:"personal-info__container__info",children:[(0,p.jsxs)("label",{children:["address ",h+1]}),(0,p.jsxs)("div",{className:"personal-info__container__info__address",children:[(0,p.jsx)("p",{className:"personal-info__container__info__address__name",children:"".concat(d("addresses[".concat(h,"].firstName"))," ").concat(d("addresses[".concat(h,"].lastName")))}),""!==d("addresses[".concat(h,"].extendedAddress"))&&(0,p.jsxs)("p",{children:[d("addresses[".concat(h,"].extendedAddress")),","]}),(0,p.jsxs)("p",{children:[d("addresses[".concat(h,"].streetAddress")),","]}),(0,p.jsx)("p",{children:"".concat(d("addresses[".concat(h,"].locality")),", ").concat(d("addresses[".concat(h,"].region"))," ").concat(d("addresses[".concat(h,"].postalCode")))})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__icon-container",children:[(0,p.jsx)(c.G,{className:"personal-info__container__info__icon",icon:"pen",onClick:function(){v(!0)}}),(0,p.jsx)(c.G,{className:"personal-info__container__info__icon",icon:"trash",onClick:function(){x(h)}})]}),g&&(0,p.jsx)("div",{className:"personal-info__black-box",onClick:function(){var e=n.findIndex((function(e){return e._id===m._id}));-1!==e?(u("addresses[".concat(h,"]"),n[e]),v(!1)):x(h)}}),(0,p.jsxs)("div",{className:g?"personal-info__container__info__pop-up":"personal-info__container__info__pop-up personal-info__container__info__pop-up--hidden",children:[(0,p.jsx)("input",(0,o.Z)((0,o.Z)({type:"hidden",name:"addresses[".concat(h,"]._id")},t("addresses[".concat(h,"]._id"))),{},{defaultValue:m._id})),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__flex",children:[(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__input-container",children:[(0,p.jsxs)("label",{htmlFor:"addresses[".concat(h,"].firstName"),children:["first name ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",(0,o.Z)((0,o.Z)({name:"addresses[".concat(h,"].firstName")},t("addresses[".concat(h,"].firstName"),{pattern:{value:/^\w{2,}$/,message:"Should be 2 or more than 2 letters"},required:"Required"})),{},{defaultValue:m.firstName})),"undefined"!==typeof r.addresses&&(0,p.jsx)("p",{className:"personal-info__container__info__pop-up__input-container__error-msg",children:"undefined"!==typeof r.addresses[h]&&(0,p.jsx)("span",{children:"undefined"!==typeof r.addresses[h].firstName&&(0,p.jsxs)("span",{children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," ",r.addresses[h].firstName.message]})})})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__input-container",children:[(0,p.jsxs)("label",{htmlFor:"addresses[".concat(h,"].lastName"),children:["last name ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",(0,o.Z)((0,o.Z)({name:"addresses[".concat(h,"].lastName")},t("addresses[".concat(h,"].lastName"),{pattern:{value:/^\w{2,}$/,message:"Should be 2 or more than 2 letters"},required:"Required"})),{},{defaultValue:m.lastName})),"undefined"!==typeof r.addresses&&(0,p.jsx)("p",{className:"personal-info__container__info__pop-up__input-container__error-msg",children:"undefined"!==typeof r.addresses[h]&&(0,p.jsx)("span",{children:"undefined"!==typeof r.addresses[h].lastName&&(0,p.jsxs)("span",{children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," ",r.addresses[h].lastName.message]})})})]})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__input-container",children:[(0,p.jsxs)("label",{htmlFor:"addresses[".concat(h,"].streetAddress"),children:["street address ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",(0,o.Z)((0,o.Z)({name:"addresses[".concat(h,"].streetAddress")},t("addresses[".concat(h,"].streetAddress"),{minLength:{value:2,message:"Should be 2 or more than 2 letters"},required:"Required"})),{},{defaultValue:m.streetAddress})),"undefined"!==typeof r.addresses&&(0,p.jsx)("p",{className:"personal-info__container__info__pop-up__input-container__error-msg",children:"undefined"!==typeof r.addresses[h]&&(0,p.jsx)("span",{children:"undefined"!==typeof r.addresses[h].streetAddress&&(0,p.jsxs)("span",{children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," ",r.addresses[h].streetAddress.message]})})})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__input-container",children:[(0,p.jsx)("label",{htmlFor:"addresses[".concat(h,"].extendedAddress"),children:"Apt #, Floor, etc. (optional)"}),(0,p.jsx)("input",(0,o.Z)((0,o.Z)({name:"addresses[".concat(h,"].extendedAddress")},t("addresses[".concat(h,"].extendedAddress"),{minLength:{value:2,message:"Should be 2 or more than 2 letters"}})),{},{defaultValue:m.extendedAddress})),"undefined"!==typeof r.addresses&&(0,p.jsx)("p",{className:"personal-info__container__info__pop-up__input-container__error-msg",children:"undefined"!==typeof r.addresses[h]&&(0,p.jsx)("span",{children:"undefined"!==typeof r.addresses[h].extendedAddress&&(0,p.jsxs)("span",{children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," ",r.addresses[h].extendedAddress.message]})})})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__flex",children:[(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__input-container",children:[(0,p.jsxs)("label",{htmlFor:"addresses[".concat(h,"].postalCode"),children:["postal code ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",(0,o.Z)((0,o.Z)({name:"addresses[".concat(h,"].postalCode")},t("addresses[".concat(h,"].postalCode"),{pattern:{value:/^\d{5}([-]?\d{4})?$/,message:"Invalid Postal Code"},required:"Required"})),{},{defaultValue:m.postalCode})),"undefined"!==typeof r.addresses&&(0,p.jsx)("p",{className:"personal-info__container__info__pop-up__input-container__error-msg",children:"undefined"!==typeof r.addresses[h]&&(0,p.jsx)("span",{children:"undefined"!==typeof r.addresses[h].postalCode&&(0,p.jsxs)("span",{children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," ",r.addresses[h].postalCode.message]})})})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__input-container",children:[(0,p.jsxs)("label",{htmlFor:"addresses[".concat(h,"].locality"),children:["city ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",(0,o.Z)((0,o.Z)({name:"addresses[".concat(h,"].locality")},t("addresses[".concat(h,"].locality"),{minLength:{value:2,message:"Should be 2 or more than 2 letters"},required:"Required"})),{},{defaultValue:m.locality})),"undefined"!==typeof r.addresses&&(0,p.jsx)("p",{className:"personal-info__container__info__pop-up__input-container__error-msg",children:"undefined"!==typeof r.addresses[h]&&(0,p.jsx)("span",{children:"undefined"!==typeof r.addresses[h].locality&&(0,p.jsxs)("span",{children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," ",r.addresses[h].locality.message]})})})]})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__input-container",children:[(0,p.jsxs)("label",{htmlFor:"addresses[".concat(h,"].region"),children:["State / Province ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__select-container",children:[(0,p.jsx)("select",(0,o.Z)((0,o.Z)({name:"addresses[".concat(h,"].region")},t("addresses[".concat(h,"].region"))),{},{defaultValue:m.region,children:s.map((function(e,n){return(0,p.jsx)("option",{value:e.abbreviation,children:e.name},n)}))})),(0,p.jsx)(c.G,{icon:"chevron-right",className:"icon"})]})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__button-container",children:[(0,p.jsx)("button",{type:"button",className:"personal-info__container__info__pop-up__button-container__cancel",onClick:function(){var e=n.findIndex((function(e){return e._id===m._id}));-1!==e?(u("addresses[".concat(h,"]"),n[e]),v(!1)):x(h)},children:"cancel"}),(0,p.jsx)("button",{type:"button",className:"personal-info__container__info__pop-up__button-container__ok",onClick:(0,l.Z)((0,_.Z)().mark((function e(){return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(["addresses[".concat(h,"].firstName"),"addresses[".concat(h,"].lastName"),"addresses[".concat(h,"].streetAddress"),"addresses[".concat(h,"].extendedAddress"),"addresses[".concat(h,"].locality"),"addresses[".concat(h,"].postalCode")]);case 2:("undefined"===typeof r.addresses||"undefined"===typeof r.addresses[h])&&v(!1);case 3:case"end":return e.stop()}}),e)}))),children:"ok"})]})]})]})};var f=function(e){var n=e.showInput,s=e.register,a=e.user,i=e.watch,r=e.errors,d=e.setShowInput,_=e.hidePassword,l=e.setHidePassword,u=e.showPopup,f=e.setShowPopup,m=e.wrongpassword,h=e.setWrongpassword,x=e.passwordError,j=e.setPasswordError,N=e.loadingPassword,g=e.setLoadingPassword;return(0,p.jsxs)("div",{className:"personal-info__container",children:[(0,p.jsx)("h2",{children:"profile"}),(0,p.jsxs)("div",{className:n.name?"personal-info__container__info personal-info__container__info--focused":"personal-info__container__info",children:[(0,p.jsx)("label",{children:"name"}),n.name?(0,p.jsxs)("div",{className:"personal-info__container__info__input-container",children:[(0,p.jsx)("input",(0,o.Z)((0,o.Z)({autoFocus:!0,name:"name"},s("name",{pattern:{value:/^[\w ]{0,}[\w]{2,}[\w ]{0,}$/,message:"should be more than 2 letters"},required:"Required"})),{},{defaultValue:a.name.trim()})),"undefined"!==typeof r.name&&(0,p.jsxs)("p",{className:"personal-info__container__info__input-container__error-msg",children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," ",r.name.message]})]}):(0,p.jsx)("p",{children:a.name}),n.name?(0,p.jsx)("h4",{className:"personal-info__container__info__link",onClick:function(){d((function(e){return(0,o.Z)((0,o.Z)({},e),{},{name:!1})}))},children:"cancel"}):(0,p.jsx)(c.G,{className:"personal-info__container__info__icon",icon:"pen",onClick:function(){d((function(e){return(0,o.Z)((0,o.Z)({},e),{},{name:!0})}))}})]}),(0,p.jsxs)("div",{className:n.email?"personal-info__container__info personal-info__container__info--focused":"personal-info__container__info",children:[(0,p.jsx)("label",{children:"email"}),n.email?(0,p.jsxs)("div",{className:"personal-info__container__info__input-container",children:[(0,p.jsx)("input",(0,o.Z)({name:"email",type:"text",defaultValue:a.email,autoFocus:!0},s("email",{pattern:{value:/^\w{2,}@\w{2,}\.\w{2,}(\.\w{2,})?$/,message:"Invalid Email Address"},required:"Required"}))),"undefined"!==typeof r.email&&(0,p.jsxs)("p",{className:"personal-info__container__info__input-container__error-msg",children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," ",r.email.message]})]}):(0,p.jsx)("p",{children:a.email}),n.email?(0,p.jsx)("h4",{className:"personal-info__container__info__link",onClick:function(){d((function(e){return(0,o.Z)((0,o.Z)({},e),{},{email:!1})}))},children:"cancel"}):(0,p.jsx)(c.G,{className:"personal-info__container__info__icon",icon:"pen",onClick:function(){d((function(e){return(0,o.Z)((0,o.Z)({},e),{},{email:!0})}))}})]}),(0,p.jsxs)("div",{className:n.password?"personal-info__container__info personal-info__container__info--focused":"personal-info__container__info",children:[(0,p.jsx)("label",{children:"password"}),n.password?(0,p.jsxs)("div",{className:"personal-info__container__info__input-container",children:[(0,p.jsxs)("div",{className:"personal-info__container__info__input-container__password-container",onClick:function(){document.querySelector(".personal-info__container__info__input-container__password-container input").focus()},children:[(0,p.jsx)("input",(0,o.Z)({name:"password",type:_?"password":"text"},s("password",{pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z0-9\s])[A-Za-z\d\W_]{8,}$/,message:"Should be more than 8 Letters and contain atleast 1 Upper case, Lower case, Number and symbol"},required:"Required"}))),_?(0,p.jsx)(c.G,{icon:"eye",className:"icon",onClick:function(e){l(!1),document.querySelector(".personal-info__container__info__input-container__password-container input").focus()}}):(0,p.jsx)(c.G,{icon:"eye-slash",className:"icon",onClick:function(){l(!0)}})]}),"undefined"!==typeof r.password&&(0,p.jsxs)("p",{className:"personal-info__container__info__input-container__error-msg",children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," ",r.password.message]})]}):(0,p.jsx)("p",{children:"***********"}),u&&(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up",children:[(0,p.jsx)("p",{className:"personal-info__container__info__pop-up__title",children:"verify its you"}),(0,p.jsxs)("div",{className:"personal-info__container__info__input-container",children:[(0,p.jsxs)("label",{htmlFor:"verifyPassword",children:["password ",(0,p.jsx)("span",{children:"*"})]}),m&&(0,p.jsxs)("p",{className:"personal-info__container__info__input-container__error-msg",children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," incorrect password"]}),""!==x&&(0,p.jsxs)("p",{className:"personal-info__container__info__input-container__error-msg",children:[(0,p.jsx)(c.G,{icon:"circle",className:"icon"})," Required"]}),(0,p.jsxs)("div",{className:"personal-info__container__info__input-container__password-container",onClick:function(){document.querySelector(".personal-info__container__info__input-container__password-container input").focus()},children:[(0,p.jsx)("input",(0,o.Z)((0,o.Z)({name:"verifyPassword",type:_?"password":"text"},s("verifyPassword",{required:"Required"})),{},{onChange:function(e){e.target.value.length>=1&&j("")}})),_?(0,p.jsx)(c.G,{icon:"eye",className:"icon",onClick:function(e){l(!1),document.querySelector(".personal-info__container__info__input-container__password-container input").focus()}}):(0,p.jsx)(c.G,{icon:"eye-slash",className:"icon",onClick:function(){l(!0)}})]})]}),(0,p.jsxs)("div",{className:"personal-info__container__info__pop-up__button-container",children:[(0,p.jsx)("button",{type:"button",className:"personal-info__container__info__pop-up__button-container__cancel",onClick:function(){f(!1)},children:"cancel"}),N?(0,p.jsx)("button",{type:"button",disabled:!0,className:"personal-info__container__info__pop-up__button-container__ok personal-info__container__info__pop-up__button-container__ok--loading",children:(0,p.jsx)("div",{className:"personal-info__container__info__pop-up__button-container__ok__loading"})}):(0,p.jsx)("button",{type:"button",className:"personal-info__container__info__pop-up__button-container__ok",onClick:function(){h(!1),""!==i("verifyPassword")?(g(!0),t.Z.get("/user/check-user?userId=".concat(a._id,"&password=").concat(i("verifyPassword"))).then((function(e){if(200!==e.status)throw new Error;f(!1),h(!1),d((function(e){return(0,o.Z)((0,o.Z)({},e),{},{password:!0})})),g(!1),document.querySelector(".personal-info__container__info__input-container__password-container input").focus()})).catch((function(e){h(!0),g(!1),document.querySelector(".personal-info__container__info__input-container__password-container input").focus()}))):j("Required")},children:"submit"})]})]}),(0,p.jsx)("div",{className:"personal-info__black-box",onClick:function(){f(!1)}})]}),n.password?(0,p.jsx)("h4",{className:"personal-info__container__info__link",onClick:function(){d((function(e){return(0,o.Z)((0,o.Z)({},e),{},{password:!1})}))},children:"cancel"}):(0,p.jsx)(c.G,{className:"personal-info__container__info__icon",icon:"pen",onClick:function(){f(!0)}})]})]})},m=s(7689),h=s(1087);var x=function(){var e=(0,m.s0)(),n=(0,i.useContext)(d.St),s=n.user,_=n.setUser,l=(0,i.useContext)(d.sA),x=(0,i.useState)(""),j=(0,a.Z)(x,2),N=j[0],g=j[1],v=(0,i.useState)(""),w=(0,a.Z)(v,2),y=w[0],b=w[1],Z=(0,i.useState)(!1),k=(0,a.Z)(Z,2),S=k[0],C=k[1],q=(0,i.useState)({name:!1,email:!1,password:!1}),A=(0,a.Z)(q,2),G=A[0],P=A[1],V=(0,i.useState)(!1),T=(0,a.Z)(V,2),E=T[0],F=T[1],R=(0,i.useState)(!0),I=(0,a.Z)(R,2),L=I[0],O=I[1],$=(0,i.useState)(!1),J=(0,a.Z)($,2),W=J[0],z=J[1],U=(0,i.useState)(!1),H=(0,a.Z)(U,2),D=H[0],M=H[1],B=(0,i.useState)(!1),K=(0,a.Z)(B,2),Q=K[0],X=K[1],Y=(0,i.useState)(""),ee=(0,a.Z)(Y,2),ne=ee[0],se=ee[1];(0,i.useEffect)((function(){document.title="My Account | Stand Out"}),[]),(0,i.useEffect)((function(){if(""!==N){var e=setTimeout((function(){g("")}),3400),n=setTimeout((function(){C(!0)}),1),s=setTimeout((function(){C(!1)}),3e3);return function(){clearTimeout(e),clearTimeout(n),clearTimeout(s)}}}),[N]),(0,i.useEffect)((function(){if(""!==y){var e=setTimeout((function(){b("")}),3400),n=setTimeout((function(){C(!0)}),1),s=setTimeout((function(){C(!1)}),3e3);return function(){clearTimeout(e),clearTimeout(n),clearTimeout(s)}}}),[y]);var oe=(0,r.cI)({defaultValues:{addresses:s.addresses}}),ae=oe.register,ie=oe.handleSubmit,re=oe.formState.errors,te=oe.watch,ce=oe.control,de=oe.setValue,_e=oe.trigger,le=(0,r.Dq)({control:ce,name:"addresses"}),pe=le.fields,ue=le.append,fe=le.remove;return"undefined"===typeof s.name?(0,p.jsxs)("div",{className:"personal-info__tool-tip-container",children:[(0,p.jsxs)("div",{className:"personal-info__tool-tip-container__tool-tip",children:[(0,p.jsx)("p",{children:"please signin to continue"}),(0,p.jsx)(h.rU,{to:"/signin",children:(0,p.jsx)("button",{children:"ok"})})]}),(0,p.jsx)("div",{className:"personal-info__tool-tip-container__black-box",onClick:function(){e(-1)}})]}):(0,p.jsxs)("div",{className:"personal-info",children:[""!==N&&(0,p.jsxs)("div",{className:S?"msg msg--visible":"msg",children:[(0,p.jsx)(c.G,{icon:["far","times-circle"],className:"icon",onClick:function(){b("")}}),(0,p.jsx)("p",{children:N})]}),""!==y&&(0,p.jsxs)("div",{className:S?"msg msg--visible":"msg",children:[(0,p.jsx)(c.G,{icon:["far","check-circle"],className:"icon",onClick:function(){b("")}}),(0,p.jsx)("p",{children:y})]}),(0,p.jsx)("h1",{children:"Personal info"}),(0,p.jsxs)("form",{onSubmit:ie((function(e){"xander21here@gmail.com"===s.email?(g("you cannot change owner info, but you can change your account info"),M(!1)):(M(!0),"undefined"===typeof e.addresses?e.addresses=[]:JSON.stringify(s.addresses)===JSON.stringify(te("addresses"))?delete e.addresses:e.addresses.forEach((function(e){""===e._id&&delete e._id})),t.Z.put("/user/update",{data:e}).then((function(n){if(200!==n.status)throw new Error;b("updated successfully"),_((function(n){return(0,o.Z)((0,o.Z)({},n),e)})),P({name:!1,email:!1,password:!1}),M(!1)})).catch((function(e){g("Something went Wrong. Please try again"),M(!1)})))})),children:[(0,p.jsx)(f,{showInput:G,register:ae,watch:te,user:s,errors:re,setShowInput:P,hidePassword:L,setHidePassword:O,showPopup:E,setShowPopup:F,wrongpassword:W,setWrongpassword:z,passwordError:ne,setPasswordError:se,loadingPassword:Q,setLoadingPassword:X}),(0,p.jsxs)("div",{className:"personal-info__container personal-info__container--address",children:[(0,p.jsx)("h2",{children:"address"}),pe.map((function(e,n){return(0,p.jsx)(u,{userAddresses:s.addresses,usStates:l,field:e,index:n,errors:re,control:ce,register:ae,watch:te,setValue:de,trigger:_e,remove:fe},e.id)})),(0,p.jsx)("div",{className:"personal-info__container__info__add-address",children:(0,p.jsx)("button",{type:"button",onClick:function(){ue({region:"AL"})},children:"add address"})})]}),(Object.values(G).includes(!0)||JSON.stringify(s.addresses)!==JSON.stringify(te("addresses")))&&(0,p.jsx)("div",{children:D?(0,p.jsx)("button",{disabled:!0,type:"button",className:"personal-info__submit personal-info__submit--loading",children:(0,p.jsx)("div",{className:"personal-info__submit__loading"})}):(0,p.jsx)("button",{type:"submit",className:"personal-info__submit",children:"upload changes"})})]})]})}}}]);
//# sourceMappingURL=258.a0be84c8.chunk.js.map